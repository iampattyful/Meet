// This file contains the ts code for loading user icon in edit profile page
import { knex } from "knex";
import { client } from "./client";
import express from "express";
import { Request, Response } from "express";
export const loadUserIcon = express.Router();

// This route is used to load the "user icon" from registration page to edit profile page
loadUserIcon.get(
  "/edit_personal_info/:id",
  async (req: Request, res: Response) => {
    const userIcon = await client.query(
      "SELECT user_icon FROM users WHERE users.user_id = $1",
      [req.params.id]
    );
    // let rows = await knex
    //   .select("user_icon")
    //   .from("users")
    //   .where("id", [req.params.id]);
    // return rows;

    if (userIcon.rowCount == 0) {
      res.status(400).json({});
    } else {
      console.log(userIcon.rows);
      res.status(200).json({
        result: true,
        message: "success",
        teachers: userIcon.rows,
      });
    }
  }
);

//  load "about me" from registration page to edit profile page

